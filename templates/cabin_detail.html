{% extends "base.html" %}

{% block content %}
<div class="layout">
    <aside class="sidebar">
        <ul class="sidebar-menu">
            <li><a href="{{ url_for('client_dashboard') }}">
                <span>üè†</span> Home
            </a></li>
            <li><a href="{{ url_for('client_cabins') }}">
                <span>üè°</span> Browse Cabins
            </a></li>
            <li><a href="{{ url_for('client_bookings') }}">
                <span>üìÖ</span> My Bookings
            </a></li>
            <li><a href="{{ url_for('logout') }}">
                <span>üö™</span> Logout
            </a></li>
        </ul>
    </aside>

    <main class="main-content">
        <div style="margin-bottom: 20px;">
            <a href="{{ url_for('client_cabins') }}" style="color: #6366f1; text-decoration: none; font-size: 14px;">‚Üê Back to Cabins</a>
        </div>

        <div class="grid grid-2" style="gap: 30px;">
            <div>
                {% if cabin['image_url'] %}
                <img src="{{ cabin['image_url'] }}" alt="{{ cabin['name'] }}" style="width: 100%; height: 400px; object-fit: cover; border-radius: 8px; margin-bottom: 20px;">
                {% else %}
                <div style="width: 100%; height: 400px; background-color: #e5e7eb; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 96px; margin-bottom: 20px;">üè°</div>
                {% endif %}

                <div class="card">
                    <div class="card-header">
                        <h2>About This Cabin</h2>
                    </div>
                    <div class="card-body">
                        <p style="line-height: 1.6; color: #1f2937; margin-bottom: 20px;">
                            {{ cabin['description'] or 'No description available.' }}
                        </p>

                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                            <div style="padding: 15px; background-color: #f9fafb; border-radius: 6px;">
                                <div style="font-size: 12px; color: #6b7280; margin-bottom: 5px;">CAPACITY</div>
                                <div style="font-size: 18px; font-weight: 600;">üë• {{ cabin['capacity'] }} guests</div>
                            </div>
                            <div style="padding: 15px; background-color: #f9fafb; border-radius: 6px;">
                                <div style="font-size: 12px; color: #6b7280; margin-bottom: 5px;">CABIN NUMBER</div>
                                <div style="font-size: 18px; font-weight: 600;">üè∑Ô∏è #{{ cabin['cabin_number'] }}</div>
                            </div>
                        </div>

                        {% if cabin['amenities'] %}
                        <div style="margin-top: 20px;">
                            <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">Amenities</h3>
                            <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                {% for amenity in cabin['amenities'].split(',') %}
                                <span style="padding: 6px 12px; background-color: #e0e7ff; color: #4f46e5; border-radius: 6px; font-size: 13px;">
                                    {{ amenity.strip() }}
                                </span>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>

                {% if reviews %}
                <div class="card" style="margin-top: 20px;">
                    <div class="card-header">
                        <h2>Guest Reviews</h2>
                    </div>
                    <div class="card-body">
                        {% for review in reviews %}
                        <div style="padding: 15px; background-color: #f9fafb; border-radius: 6px; margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <strong>{{ review['user_name'] }}</strong>
                                <div>
                                    {% for i in range(review['rating']) %}
                                    <span style="color: #f59e0b;">‚≠ê</span>
                                    {% endfor %}
                                </div>
                            </div>
                            <p style="font-size: 14px; color: #6b7280; line-height: 1.6;">{{ review['comment'] }}</p>
                            <div style="font-size: 12px; color: #9ca3af; margin-top: 8px;">{{ review['created_at'] }}</div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>

            <div>
                <div class="card" style="position: sticky; top: 20px;">
                    <div class="card-header" style="background-color: #6366f1; color: white;">
                        <h2>Book This Cabin</h2>
                    </div>
                    <div class="card-body">
                        <div style="text-align: center; margin-bottom: 25px;">
                            <div style="font-size: 42px; font-weight: 700; color: #1f2937;">
                                ${{ "%.0f"|format(cabin['price_per_night']) }}
                            </div>
                            <div style="font-size: 14px; color: #6b7280;">per night</div>
                        </div>

                        <a href="{{ url_for('book_cabin', cabin_id=cabin['id']) }}" class="btn btn-primary" style="width: 100%; padding: 15px; font-size: 16px; text-align: center;">
                            Reserve Now
                        </a>

                        <div style="text-align: center; margin-top: 15px; font-size: 13px; color: #6b7280;">
                            You won't be charged yet
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
{% endblock %}
