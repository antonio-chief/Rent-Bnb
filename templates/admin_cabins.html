{% extends "base.html" %}

{% block content %}
<div class="layout">
    <aside class="sidebar">
        <ul class="sidebar-menu">
            <li><a href="{{ url_for('admin_dashboard') }}">
                <span>üè†</span> Home
            </a></li>
            <li><a href="{{ url_for('admin_bookings') }}">
                <span>üìÖ</span> Bookings
            </a></li>
            <li><a href="{{ url_for('admin_cabins') }}" class="active">
                <span>üè°</span> Cabins
            </a></li>
            <li><a href="{{ url_for('admin_users') }}">
                <span>üë•</span> Users
            </a></li>
            <li><a href="{{ url_for('logout') }}">
                <span>üö™</span> Logout
            </a></li>
        </ul>
    </aside>

    <main class="main-content">
        <div class="table-container">
            <div class="table-header">
                <h2>All Cabins</h2>
                <a href="{{ url_for('add_cabin') }}" class="btn btn-primary">Add New Cabin</a>
            </div>
            
            {% if cabins %}
            <table>
                <thead>
                    <tr>
                        <th>CABIN</th>
                        <th>CAPACITY</th>
                        <th>PRICE PER NIGHT</th>
                        <th>AMENITIES</th>
                        <th>ACTIONS</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cabin in cabins %}
                    <tr>
                        <td>
                            <div style="display: flex; gap: 15px; align-items: center;">
                                {% if cabin['image_url'] %}
                                <img src="{{ cabin['image_url'] }}" alt="{{ cabin['name'] }}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 4px;">
                                {% else %}
                                <div style="width: 60px; height: 60px; background-color: #e5e7eb; border-radius: 4px; display: flex; align-items: center; justify-content: center;">üè°</div>
                                {% endif %}
                                <div>
                                    <div style="font-weight: 600;">{{ cabin['name'] }}</div>
                                    <div style="font-size: 12px; color: #6b7280;">Cabin #{{ cabin['cabin_number'] }}</div>
                                </div>
                            </div>
                        </td>
                        <td>{{ cabin['capacity'] }} guests</td>
                        <td style="font-weight: 600;">${{ "%.2f"|format(cabin['price_per_night']) }}</td>
                        <td>
                            {% if cabin['amenities'] %}
                            <div style="font-size: 12px; color: #6b7280;">{{ cabin['amenities'][:50] }}{% if cabin['amenities']|length > 50 %}...{% endif %}</div>
                            {% else %}
                            <span style="color: #9ca3af;">-</span>
                            {% endif %}
                        </td>
                        <td>
                            <div style="display: flex; gap: 5px;">
                                <a href="{{ url_for('edit_cabin', cabin_id=cabin['id']) }}" class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;">Edit</a>
                                <form method="POST" action="{{ url_for('delete_cabin', cabin_id=cabin['id']) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this cabin?');">
                                    <button type="submit" class="btn btn-danger" style="padding: 6px 12px; font-size: 12px;">Delete</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div style="padding: 40px; text-align: center; color: #6b7280;">
                No cabins found
            </div>
            {% endif %}
        </div>
    </main>
</div>
{% endblock %}
